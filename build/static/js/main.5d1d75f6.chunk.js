(this.webpackJsonpgraphql=this.webpackJsonpgraphql||[]).push([[0],{63:function(e,t,a){e.exports=a(72)},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(51),o=a.n(l),i=(a(71),a(5)),d=a(42),c=a(85);const s=Object(r.createContext)(null),m=e=>{let{children:t}=e;const[a,l]=Object(r.useState)(localStorage.getItem("token"));return n.a.createElement(s.Provider,{value:{token:a,login:e=>{console.log("Login called with token:",e),e&&(l(e),localStorage.setItem("token",e),console.log("Token stored:",e))},logout:()=>{l(null),localStorage.removeItem("token")}}},t)},u=()=>{const e=Object(r.useContext)(s);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};var g=a(58),p=a(86),h=a(88),y=a(56);const v=Object(g.a)({uri:"https://learn.reboot01.com/api/graphql-engine/v1/graphql"}),E=Object(y.a)((e,t)=>{let{headers:a}=t;const r=localStorage.getItem("token");return console.log("Apollo client using token:",r),{headers:{...a,authorization:r?"Bearer "+r:""}}});var f=new p.a({link:E.concat(v),cache:new h.a});const x={root:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(120deg, #6b21a8, #6366F1)",padding:"1rem"},loginCard:{backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0",maxWidth:"400px",width:"100%",padding:"2rem"},title:{textAlign:"center",margin:"0 0 1rem",fontSize:"1.5rem",color:"#1e293b"},errorMsg:{color:"#ef4444",marginBottom:"1rem",textAlign:"center",fontSize:"0.95rem"},inputGroup:{marginBottom:"1rem"},input:{width:"100%",padding:"0.75rem",border:"1px solid #cbd5e1",borderRadius:"8px",fontSize:"1rem"},submitButton:{width:"100%",padding:"0.75rem",background:"linear-gradient(90deg, #ef4444, #ec4899)",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"}};var b=function(){const[e,t]=Object(r.useState)(""),[a,l]=Object(r.useState)(""),[o,d]=Object(r.useState)(""),{login:c}=u(),s=Object(i.q)();return n.a.createElement("div",{style:x.root},n.a.createElement("div",{style:x.loginCard},n.a.createElement("h2",{style:x.title},"Sign in"),o&&n.a.createElement("div",{style:x.errorMsg},o),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),d("");try{console.log("Attempting login...");const t=btoa(`${e}:${a}`),r=await fetch("https://learn.reboot01.com/api/auth/signin",{method:"POST",headers:{Authorization:"Basic "+t}});if(console.log("Response status:",r.status),!r.ok)throw new Error("Invalid credentials");const n=await r.json();console.log("Response data:",n);const l=n.token||n.jwt||n;if(!l)throw new Error("No token in response");console.log("%cJWT token:","color: #10B981; font-weight: bold;",l),c(l),setTimeout(()=>{s("/",{replace:!0})},200)}catch(r){console.error("Login error:",r),d("Login failed. Please check your credentials.")}}},n.a.createElement("div",{style:x.inputGroup},n.a.createElement("input",{type:"text",style:x.input,placeholder:"Username or Email",value:e,onChange:e=>t(e.target.value),required:!0})),n.a.createElement("div",{style:x.inputGroup},n.a.createElement("input",{type:"password",style:x.input,placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0})),n.a.createElement("button",{type:"submit",style:x.submitButton},"Sign in"))))},k=a(87),B=a(89);const S=k.a`
  query {
    user {
      id
      login
      firstName
      lastName
      email
      campus
    }
  }
`,w=k.a`
  query {
    transaction(
      where: {
        type: { _eq: "xp" }
        _and: [
          { path: { _like: "/bahrain/bh-module%" } }
          { path: { _nlike: "/bahrain/bh-module/checkpoint%" } }
          { path: { _nlike: "/bahrain/bh-module/piscine%" } }
        ]
      }
      order_by: { createdAt: desc }
      limit: 4
    ) {
      object {
        type
        name
      }
    }
  }
`,I=k.a`
  query xpAggregate($userId: Int!) {
    transaction_aggregate(
      where: {
        event: { path: { _eq: "/bahrain/bh-module" } }
        type: { _eq: "xp" }
        userId: { _eq: $userId }
      }
    ) {
      aggregate {
        sum {
          amount
        }
      }
    }
  }
`,C=k.a`
  query {
    user {
      totalUp
      totalDown
      auditRatio
    }
  }
`,F=k.a`
  query {
    user {
      transactions(
        where: { type: { _ilike: "%skill%" } }
        order_by: { amount: desc }
      ) {
        type
        amount
      }
    }
  }
`,j=k.a`
  query {
    user {
      transactions(where: { type: { _ilike: "%skill%" } }) {
        type
        amount
      }
    }
  }
`;function T(e){let{skills:t}=e;if(!t||0===t.length)return n.a.createElement("p",{style:W.infoText},"No skills data available.");const a=Math.max(...t.map(e=>e.amount)),r=t.map((e,r)=>{const n=2*r*Math.PI/t.length-Math.PI/2,l=e.amount/a*96;return{x:160+l*Math.cos(n),y:160+l*Math.sin(n),label:e.type.replace("skill_",""),amount:e.amount}}),l=r.map((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`).join(" ")+" Z",o=[.2,.4,.6,.8,1].map(e=>n.a.createElement("circle",{key:e,cx:160,cy:160,r:96*e,fill:"none",stroke:"#D1D5DB",strokeWidth:"1"})),i=r.map((e,a)=>{const r=2*a*Math.PI/t.length-Math.PI/2;return n.a.createElement("line",{key:a,x1:160,y1:160,x2:160+96*Math.cos(r),y2:160+96*Math.sin(r),stroke:"#D1D5DB",strokeWidth:"1"})}),d=r.map((e,t)=>n.a.createElement("circle",{key:t,cx:e.x,cy:e.y,r:"4",fill:"#F97316"})),c=r.map((e,a)=>{const r=2*a*Math.PI/t.length-Math.PI/2,l=160+126*Math.cos(r),o=160+126*Math.sin(r);let i="start";return r<-Math.PI/2||r>Math.PI/2?i="end":Math.abs(r)===Math.PI/2&&(i="middle"),n.a.createElement("text",{key:a,x:l,y:o,textAnchor:i,style:W.radarLabel,dominantBaseline:"middle"},e.label)});return n.a.createElement("div",{style:W.radarContainer},n.a.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",style:W.radarSvg},o,i,n.a.createElement("path",{d:l,fill:"rgba(249,115,22,0.2)",stroke:"#F97316",strokeWidth:"2"}),d,c),n.a.createElement("div",{style:W.radarValues},t.map((e,t)=>n.a.createElement("div",{key:t,style:{fontSize:"0.9rem",marginBottom:"4px"}},n.a.createElement("strong",null,e.type.replace("skill_","")),": ",e.amount))))}function A(e){let{skills:t}=e;if(!t||0===t.length)return n.a.createElement("p",{style:W.infoText},"No tech skills available.");const a=200/Math.max(...t.map(e=>e.amount),1),r=60*t.length;return n.a.createElement("div",{style:W.barContainer},n.a.createElement("svg",{width:r,height:300,viewBox:`0 0 ${r} 300`,style:W.barSvg},t.map((e,t)=>{const r=e.amount*a,l=60*t,o=200-r+20;return n.a.createElement("g",{key:t},n.a.createElement("rect",{x:l,y:o,width:40,height:r,fill:"#8B5CF6",rx:"3"}),n.a.createElement("text",{x:l+20,y:o-5,textAnchor:"middle",fill:"#111827",fontSize:"13",fontWeight:"bold"},e.amount),n.a.createElement("text",{x:l+20,y:235,textAnchor:"middle",fill:"#111827",fontSize:"12"},e.skill))})))}var M=function(){var e,t,a,r,l,o,i,d,c,s,m,u,g,p,h,y,v;const{data:E,loading:f,error:x}=Object(B.a)(S),{data:b,loading:k,error:M}=Object(B.a)(w),z=parseInt((null===E||void 0===E||null===(e=E.user)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id)||0,10),{data:R,loading:_,error:P}=Object(B.a)(I,{variables:{userId:z},skip:!z}),{data:q,loading:D,error:L}=Object(B.a)(C),{data:N,loading:O,error:U}=Object(B.a)(F),{data:$,loading:G,error:V}=Object(B.a)(j),H=x||M||P||L||U||V;if(f||k||_||D||O||G)return n.a.createElement("div",{style:W.centeredScreen},n.a.createElement("div",{style:W.loadingText},"Loading..."));if(H)return n.a.createElement("div",{style:W.centeredScreen},n.a.createElement("div",{style:W.errorText},"Error:"," ",(null===x||void 0===x?void 0:x.message)||(null===M||void 0===M?void 0:M.message)||(null===P||void 0===P?void 0:P.message)||(null===L||void 0===L?void 0:L.message)||(null===U||void 0===U?void 0:U.message)||(null===V||void 0===V?void 0:V.message)||"Unknown error"));const J=(null===E||void 0===E||null===(a=E.user)||void 0===a?void 0:a[0])||{},X=(null===b||void 0===b?void 0:b.transaction)||[],Z=(null===R||void 0===R||null===(r=R.transaction_aggregate)||void 0===r||null===(l=r.aggregate)||void 0===l||null===(o=l.sum)||void 0===o?void 0:o.amount)||0,{totalUp:K=0,totalDown:Q=0}=(null===q||void 0===q||null===(i=q.user)||void 0===i?void 0:i[0])||{},Y=((null===N||void 0===N||null===(d=N.user)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.transactions)||[]).reduce((e,t)=>(e.some(e=>e.type===t.type)||e.push(t),e),[]).slice(0,6),ee=(null===$||void 0===$||null===(s=$.user)||void 0===s||null===(m=s[0])||void 0===m?void 0:m.transactions)||[],te=Object.entries({go:"skill_go",javascript:"skill_js",html:"skill_html",css:"skill_css",unix:"skill_unix",docker:"skill_docker",sql:"skill_sql"}).map(e=>{let[t,a]=e;const r=ee.find(e=>e.type===a);return{skill:t.toUpperCase(),amount:r?r.amount:0}});let ae,re;Z>=1e6?(ae=(Z/1e6).toFixed(2),re="MB"):(ae=Math.round(Z/1e3),re="kB");const ne=Q>0?(K/Q).toFixed(1):"N/A",le=(K/1e6).toFixed(2),oe=(Q/1e6).toFixed(2),ie=Math.max(K,Q,1);return n.a.createElement("div",{style:W.root},n.a.createElement("nav",{style:W.navbar},n.a.createElement("div",{style:W.navWrapper},n.a.createElement("div",{style:W.brandContainer},n.a.createElement("div",{style:W.brandIconPlaceholder},"R"),n.a.createElement("span",{style:W.brandText},"reboot01")),n.a.createElement("div",{style:W.navRight},n.a.createElement("button",{style:W.logoutBtn,onClick:()=>{window.location.href="/Login"}},"Logout")))),n.a.createElement("main",{style:W.main},n.a.createElement("div",{style:W.container},n.a.createElement("div",{style:W.titleSection},n.a.createElement("h1",{style:W.title},"Welcome, ",J.login||"User","!"),n.a.createElement("p",{style:W.subtitle},"Here\u2019s your profile overview")),n.a.createElement("div",{style:W.card},n.a.createElement("h2",{style:W.cardTitle},"User Basic Info"),n.a.createElement("div",{style:W.infoGrid},n.a.createElement("div",{style:W.infoItem},n.a.createElement("strong",null,"ID:")," ",null!==(u=J.id)&&void 0!==u?u:"N/A"),n.a.createElement("div",{style:W.infoItem},n.a.createElement("strong",null,"Login:")," ",null!==(g=J.login)&&void 0!==g?g:"N/A"),n.a.createElement("div",{style:W.infoItem},n.a.createElement("strong",null,"First Name:")," ",null!==(p=J.firstName)&&void 0!==p?p:"N/A"),n.a.createElement("div",{style:W.infoItem},n.a.createElement("strong",null,"Last Name:")," ",null!==(h=J.lastName)&&void 0!==h?h:"N/A"),n.a.createElement("div",{style:W.infoItem},n.a.createElement("strong",null,"Email:")," ",null!==(y=J.email)&&void 0!==y?y:"N/A"),n.a.createElement("div",{style:W.infoItem},n.a.createElement("strong",null,"Campus:")," ",null!==(v=J.campus)&&void 0!==v?v:"N/A"))),n.a.createElement("div",{style:W.card},n.a.createElement("h2",{style:W.cardTitle},"Last Projects"),X.length>0?n.a.createElement("ul",{style:W.projectList},X.map((e,t)=>{var a;return n.a.createElement("li",{key:t,style:W.projectItem},(null===(a=e.object)||void 0===a?void 0:a.name)||"Unknown")})):n.a.createElement("p",{style:W.infoText},"No recent projects found.")),n.a.createElement("div",{style:W.card},n.a.createElement("h2",{style:W.cardTitle},"XP"),n.a.createElement("div",{style:W.xpWrapper},n.a.createElement("div",{style:W.xpValue},ae),n.a.createElement("div",{style:W.xpUnit},re))),n.a.createElement("div",{style:W.card},n.a.createElement("h2",{style:W.cardTitle},"Audit Ratio"),n.a.createElement("div",{style:W.auditWrapper},n.a.createElement("div",{style:W.auditBlock},n.a.createElement("p",{style:W.auditLabel},"Done: ",n.a.createElement("span",{style:{color:"#2563EB"}},le," MB")),n.a.createElement("div",{style:W.auditBarBg},n.a.createElement("div",{style:{...W.auditBarFill,width:K/ie*100+"%"}}))),n.a.createElement("div",{style:W.auditBlock},n.a.createElement("p",{style:W.auditLabel},"Received:"," ",n.a.createElement("span",{style:{color:"#2563EB"}},oe," MB")),n.a.createElement("div",{style:W.auditBarBg},n.a.createElement("div",{style:{...W.auditBarFill,width:Q/ie*100+"%"}}))),n.a.createElement("div",{style:W.auditRatioText},"Ratio: ",ne))),n.a.createElement("div",{style:W.card},n.a.createElement("h2",{style:W.cardTitle},"Skills Radar"),n.a.createElement(T,{skills:Y})),n.a.createElement("div",{style:W.card},n.a.createElement("h2",{style:W.cardTitle},"Tech Skills Bar Chart"),n.a.createElement(A,{skills:te})))))};const W={root:{minHeight:"100vh",backgroundColor:"#FAFAFA",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif',color:"#111"},centeredScreen:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FAFAFA"},loadingText:{fontSize:"24px",color:"#555"},errorText:{fontSize:"18px",color:"#DC2626",textAlign:"center",padding:"1rem"},navbar:{position:"fixed",top:0,width:"100%",backgroundColor:"#FFF",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",borderBottom:"1px solid #E5E7EB",zIndex:50,height:"64px",display:"flex",alignItems:"center"},navWrapper:{maxWidth:"1200px",margin:"0 auto",padding:"0 1rem",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},brandContainer:{display:"flex",alignItems:"center",gap:"0.5rem"},brandIconPlaceholder:{width:"32px",height:"32px",backgroundColor:"#06B6D4",borderRadius:"50%",color:"#FFF",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1rem"},brandText:{fontSize:"1.25rem",fontWeight:"bold",background:"linear-gradient(90deg, #06B6D4, #9333EA)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},navRight:{display:"flex",alignItems:"center"},logoutBtn:{backgroundColor:"#EF4444",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer",padding:"0.5rem 1rem",fontWeight:"500",fontSize:"0.9rem"},main:{paddingTop:"80px",paddingBottom:"1rem"},container:{maxWidth:"1024px",margin:"0 auto",padding:"0 1rem"},titleSection:{textAlign:"center",marginBottom:"2rem"},title:{fontSize:"2rem",fontWeight:"bold",margin:0,color:"#374151"},subtitle:{marginTop:"0.5rem",color:"#6B7280"},card:{backgroundColor:"#F3F4F6",borderRadius:"12px",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",border:"1px solid #E5E7EB",padding:"1rem",marginBottom:"2rem"},cardTitle:{fontSize:"1.25rem",margin:"0 0 1rem",color:"#1F2937",textAlign:"center"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"0.75rem"},infoItem:{fontSize:"0.95rem",border:"1px solid #E5E7EB",borderRadius:"8px",padding:"0.5rem",backgroundColor:"#fff"},projectList:{listStyle:"none",padding:0,margin:0},projectItem:{margin:"0.5rem 0",padding:"0.5rem",border:"1px solid #E5E7EB",borderRadius:"8px",backgroundColor:"#fff"},infoText:{margin:"0.5rem 0",color:"#6B7280"},xpWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},xpValue:{fontSize:"2rem",fontWeight:"bold",color:"#EC4899"},xpUnit:{fontSize:"0.9rem",color:"#6B7280"},auditWrapper:{display:"flex",flexDirection:"column",gap:"1rem"},auditBlock:{display:"flex",flexDirection:"column"},auditLabel:{margin:"0 0 0.25rem",fontWeight:"500"},auditBarBg:{width:"100%",backgroundColor:"#E5E7EB",borderRadius:"6px",height:"8px",overflow:"hidden"},auditBarFill:{backgroundColor:"#F97316",height:"8px",borderRadius:"6px"},auditRatioText:{fontSize:"1rem",fontWeight:"bold",color:"#F97316",marginTop:"0.5rem"},radarContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"1rem",alignItems:"flex-start"},radarSvg:{flexShrink:0},radarLabel:{fontSize:"0.75rem",fill:"#374151"},radarValues:{display:"flex",flexDirection:"column",fontSize:"0.95rem"},barContainer:{overflowX:"auto",textAlign:"center"},barSvg:{margin:"0 auto",display:"block"}},z=e=>{let{children:t}=e;const{token:a}=u();return a?t:n.a.createElement(i.a,{to:"/login"})};var R=()=>n.a.createElement(c.a,{client:f},n.a.createElement(m,null,n.a.createElement(d.a,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/login",element:n.a.createElement(b,null)}),n.a.createElement(i.b,{path:"/",element:n.a.createElement(z,null,n.a.createElement(M,null))})))));var _=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,91)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:l,getTTFB:o}=t;a(e),r(e),n(e),l(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null))),_()}},[[63,1,2]]]);
//# sourceMappingURL=main.5d1d75f6.chunk.js.map